<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Comparison</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        #container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        #leftUpload, #rightUpload {
            width: 45%;
            padding: 10px;
            box-sizing: border-box;
        }
        #compareBtn {
            width: 200px;
            padding: 10px;
            box-sizing: border-box;
        }
    </style>
</head>
<body>
    <h1>File Comparison</h1>
    
    <div id="container">
        <input type="file" id="leftUpload" accept=".json">
        <input type="file" id="rightUpload" accept=".json">
    </div>
    
    <button id="compareBtn" onclick="compareFiles()">Compare</button>
    <div id="who_doesnt_follow_back"></div>

    <script>
        function compareFiles() {
            const leftFileInput = document.getElementById("leftUpload");
            const rightFileInput = document.getElementById("rightUpload");

            if (leftFileInput.files.length === 0 || rightFileInput.files.length === 0) {
                alert("Please select two JSON files for comparison.");
                return;
            }

            const leftFile = leftFileInput.files[0];
            const rightFile = rightFileInput.files[0];

            const reader = new FileReader();

            reader.onload = function(e) {
                const leftData = JSON.parse(e.target.result);

                // Extract values from the left data
                const followerList = leftData.map(item => item.string_list_data[0].value);

                // Now read the right file
                const rightReader = new FileReader();

                rightReader.onload = function(e) {
                    const rightData = JSON.parse(e.target.result);

                    // Extract values from the right data
                    const followingList = rightData.relationships_following.map(item => item.string_list_data[0].value);

                    // Compare the lists and find values in following but not in followers
                    const followingButNotFollowingBackList = followingList.filter(value => !followerList.includes(value));

                    // Print the result
                    alert("Following but not following back: " + JSON.stringify(followingButNotFollowingBackList));
                };

                rightReader.readAsText(rightFile);
            };

            reader.readAsText(leftFile);
        }
    </script>
</body>
</html>
